function createCookie(e,t,a){var r;if(a){var n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3),r="; expires="+n.toGMTString()}else r="";document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+r+"; path=/; SameSite=Lax"}function eraseCookie(e){createCookie(e,"",-1)}function changeTheme(e){"dark"==e?(createCookie("theme","dark"),$("body").addClass("dark")):(eraseCookie("theme"),$("body").removeClass("dark"))}function readableFileSize(e){var t=new Array("Bytes","KB","MB","GB");for(i=0;e>900;)e/=1e3,i++;return(Math.round(100*e)/100).toFixed(1)+" "+t[i]}$(document).ready((function(){var e=window.location.pathname;e.indexOf("/participants/signup")+1&&$("#time_zone").val(Intl.DateTimeFormat().resolvedOptions().timeZone),e.indexOf("/opinions/attach_documents")+1&&(document.querySelector("#attach_documents").addEventListener("change",(function(e){$("#loading_bar").hide(),$("#attach_btn").hide(),$("#attach_documents_error").hide();for(var t,a=e.target.files,r=[],n=!1,o=$("#attach_documents").attr("accept").split(","),s=$("#documents li").length,d=$("#attach_documents_error").attr("f_max_size"),i=$("#attach_documents_error").attr("f_max_total"),c=0;t=a[c];c++){var l="."+t.name.toLowerCase().split(".").slice(-1);s+=1,t.size>=d||-1===$.inArray(l,o)||s>i?(r.push('<li class="text-danger">'),n=!0):r.push("<li>"),r.push('<b dir="auto">',t.name,"</b> [<bdi>",readableFileSize(t.size),'</bdi>, <bdi>"',t.type||"n/a",'"</bdi>]</li>')}$("#documents_list").html("<ul>"+r.join("")+"</ul>"),0==n?$("#attach_btn").show():$("#attach_documents_error").show()}),!1),document.querySelector("#attach_btn").addEventListener("click",(function(){if(0==document.querySelector("#attach_documents").files.length)return void alert("Error: No file selected");$("#loading_bar").show();let t=$("#loading_bar div.bar"),a=new FormData;for(var r=document.getElementById("attach_documents").files.length,n=0;n<r;n++)a.append("documents[]",document.getElementById("attach_documents").files[n]);let o=new XMLHttpRequest;o.open("POST",e),o.setRequestHeader("X-CSRFToken",$("#csrf_token").attr("value")),o.upload.addEventListener("progress",(function(e){let a=e.loaded/e.total*100;t.css({width:a+"%"}),a<=10&&t.addClass("danger").removeClass("warning secondary primary success"),a<=25&&a>10&&t.addClass("warning").removeClass("danger secondary primary success"),a<=50&&a>25&&t.addClass("secondary").removeClass("danger warning primary success"),a<=75&&a>50&&t.addClass("primary").removeClass("danger warning secondary success")})),o.addEventListener("load",(function(e){if(200==o.status){for(var a,r=JSON.parse(o.response),n=[],s=$("#attach_documents_error").attr("delete"),d=0;a=r[d];d++)n.push('<li><a href="',a.url,'" target="_blank" dir="auto">',a.name,"</a> [<bdi>",readableFileSize(a.size),'</bdi>] (<a href="',a.delete_url,'">',s,"</a>)</li>");$("#documents ul").html(n.join(""))}$("#attach_btn").hide(),t.css({width:"100%"}).addClass("success").removeClass("danger warning secondary primary")})),o.send(a)})))}));